<html>
<head>
<meta charset="utf8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="keywords" content="转盘">
<meta name="description" content="转盘">
<meta name="robots" content="all">
<meta name="baiduspider" content="all">
<meta name="googlebot" content="all">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="renderer" content="webkit">
<title>转盘</title>
<style>
    body,html{margin:0px;padding:0px;}
    body{background-color:#333;padding:10px;}
    .wrapper{width:100%;max-width:375px;margin:0px auto;}
    .part2{background:url(Group.png) left top no-repeat;padding-top:100%;background-size:100% 100%;position:relative;}
    .rotate-pointer{position:absolute;top:55%;left:50%;width:30%;height:40%;margin-left:-15%;margin-top:-15%;background:url(pointer.png) center center no-repeat;background-size:100% 100%;}

    #pointer {
      transition: transform 6.5s;
      transition-timing-function: ease-in-out;
    }
    a {
      color: #fff;
    }
</style>
</head>
<body>
<div class="wrapper" id = "wrapper">
    <div class = "part2">
        <div id = "pointer" class = "rotate-pointer" data-click = ""></div>
    </div>
    <a href="./index-zp.html" target="_blank">旋转圆盘版</a>
</div>
<script src="./jquery.min.js"></script>
<script>
// 测试抽奖的
(function(){
    var btn = $("#pointer"),
        options = {
        };
    var isEnd = false;
   // 美食的角度列表
options.gifts = {
    "1": {
        id: "1",
        name: "兰州拉面",
        angleStart: 0,
        angleEnd: 27.69,
        tips: "一碗热气腾腾的兰州拉面，暖胃又满足！"
    },
    "2": {
        id: "2",
        name: "自选水饺",
        angleStart: 27.69,
        angleEnd: 55.38,
        tips: "饺子随便挑，今天吃什么馅儿你说了算！"
    },
    "3": {
        id: "3",
        name: "土豆泥拌饭",
        angleStart: 55.38,
        angleEnd: 83.07,
        tips: "软糯土豆泥拌上香饭，简单却幸福。"
    },
    "4": {
        id: "4",
        name: "谢宝林",
        angleStart: 83.07,
        angleEnd: 110.76,
        tips: "谢宝林的独特风味，试试看惊喜多多！"
    },
    "5": {
        id: "5",
        name: "浇汁米饭",
        angleStart: 110.76,
        angleEnd: 138.45,
        tips: "浓郁的浇汁淋在米饭上，香到飞起！"
    },
    "6": {
        id: "6",
        name: "双拼拌饭",
        angleStart: 138.45,
        angleEnd: 166.14,
        tips: "双倍美味，双倍快乐，吃饱才有力气！"
    },
    "7": {
        id: "7",
        name: "忘记早餐",
        angleStart: 166.14,
        angleEnd: 193.83,
        tips: "早餐忘了？那就用这顿弥补吧！"
    },
    "8": {
        id: "8",
        name: "煎肉饭",
        angleStart: 193.83,
        angleEnd: 221.52,
        tips: "煎肉的香气扑鼻，配饭绝了！"
    },
    "9": {
        id: "9",
        name: "朱家小馆",
        angleStart: 221.52,
        angleEnd: 249.21,
        tips: "朱家小馆的家常味，温暖你的胃。"
    },
    "10": {
        id: "10",
        name: "山西刀削面",
        angleStart: 249.21,
        angleEnd: 276.90,
        tips: "刀削面的劲道，山西风味正宗得很！"
    },
    "11": {
        id: "11",
        name: "煎饼",
        angleStart: 276.90,
        angleEnd: 304.59,
        tips: "煎饼一口咬下去，酥脆满分！"
    },
    "12": {
        id: "12",
        name: "面夫子",
        angleStart: 304.59,
        angleEnd: 332.28,
        tips: "面夫子的面，汤鲜味美，吃完元气满满。"
    },
    "13": {
        id: "13",
        name: "麻辣拌",
        angleStart: 332.28,
        angleEnd: 360,
        tips: "麻辣拌的刺激滋味，辣到停不下来！"
    }
};

    // 获取[n,m]的随机整数
    function getRandom (n, m) {
        var num = Math.floor(Math.random() * (m - n + 1) + n)
        return num
    }
    function _begin(){

        var base = 2160; //和transition: transform 6.5s;对应 1圈用1s

        var result = getRandom(-30,330); // 随机
        
        var _key = null; // 内定奖品id

        if (_key) {
          result = getRandom(options.gifts[_key].angleStart,options.gifts[_key].angleEnd)
        }


        var deg = -(base+result)



        btn.css({"transform":"rotate("+deg+"deg)"});

        btn.on('transitionend',function(){
            for (var key in options.gifts) {

              if (options.gifts[key].angleStart <= result && result<=options.gifts[key].angleEnd) {
                confirm(options.gifts[key].tips);
                window.location.reload()
              }
            }
        })
    }
 
    btn.on("click",_begin);
})();

</script>
</html>
